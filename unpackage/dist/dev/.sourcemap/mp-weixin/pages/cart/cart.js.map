{"version":3,"sources":["uni-app:///main.js","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?7d03","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?3853","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?f2d8","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?bf3f","uni-app:///pages/cart/cart.vue","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?d69e","webpack:///D:/study/koa+mysql+redis+vue/koa-client-vx/pages/cart/cart.vue?52e2"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,+NAEN;AACL,GAAG;AACH;AACA,WAAW,iVAEN;AACL,GAAG;AACH;AACA,WAAW,uPAEN;AACL,GAAG;AACH;AACA,WAAW,mQAEN;AACL,GAAG;AACH;AACA,WAAW,2OAEN;AACL,GAAG;AACH;AACA,WAAW,qOAEN;AACL,GAAG;AACH;AACA,WAAW,qOAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAsrB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmD1sB;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA,yBAFA;;AAIA,GANA;AAOA;AACA,aADA,qBACA,GADA,EACA;AACA;AACA,kBADA;AAEA,uBAFA;;AAIA,KANA;AAOA,eAPA,yBAOA;AACA;AACA;AACA,wDADA,EADA,GADA,+CACA,IADA,yBACA,IADA;;;AAMA,0CANA;AAOA,KAdA;AAeA,iBAfA,yBAeA,IAfA,EAeA;AACA;AACA,8BAFA,CAEA;AACA;AACA,gBADA,GACA,IADA,CACA,QADA,CACA,OADA,GACA,IADA,CACA,OADA,CACA,MADA,GACA,IADA,CACA,MADA,CACA,IADA,GACA,IADA,CACA,IADA,CACA,OADA,GACA,IADA,CACA,OADA,CACA,EADA,GACA,IADA,CACA,EADA,CACA,OADA,GACA,IADA,CACA,OADA,CACA,UADA,GACA,IADA,CACA,UADA,CACA,UADA,GACA,IADA,CACA,UADA,CACA,SADA,GACA,IADA,CACA,SADA,CACA,QADA,GACA,IADA,CACA,QADA,CACA,KADA,GACA,IADA,CACA,KADA;AAEA;AACA,gBADA,EACA;AACA,0BAFA;AAGA,0BAHA;AAIA,gCAJA;AAKA,gCALA;AAMA,8BANA;AAOA,4BAPA;AAQA,sBARA;AASA,yBATA;AAUA,wBAVA;;AAYA;AACA;AACA,SAFA,MAEA;AACA;AACA,8BADA;AAEA,0BAFA;AAGA,sBAHA;AAIA,4BAJA;AAKA,4BALA;AAMA,0BANA;AAOA,0BAPA;AAQA,oBARA;AASA,4BATA;;AAWA,SAZA,MAYA;AAAA,qDACA,OADA,aACA;AACA;AACA;AACA;AACA;AACA,aANA;AAOA;AACA,OApCA;AAqCA;AACA;AACA,KAzDA;AA0DA;AACA,mBA3DA,2BA2DA,IA3DA,EA2DA;;AAEA,8BAFA;AAGA,uCAHA;;;AAMA;AACA,+CADA;AAEA,+BAFA,GANA,SAMA,GANA;;AAUA,0CAVA;AAWA,KAtEA;AAuEA;AACA,iBAxEA,yBAwEA,QAxEA,EAwEA;AACA,aADA,GACA,QADA,CACA,OADA,CACA,IADA,GACA,QADA,CACA,IADA;AAEA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KApFA;AAqFA;AACA,YAtFA,oBAsFA,QAtFA,EAsFA,OAtFA,EAsFA;AACA,UADA,GACA,QADA,CACA,IADA;AAEA,aAFA,GAEA,OAFA,CAEA,OAFA,CAEA,UAFA,GAEA,OAFA,CAEA,UAFA,CAEA,UAFA,GAEA,OAFA,CAEA,UAFA;AAGA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;;AAEA,KAlGA;AAmGA;AACA,eApGA,uBAoGA,QApGA,EAoGA,SApGA,EAoGA;AACA,uBADA,GACA,QADA,CACA,OADA,EACA,OADA,GACA,QADA,CACA,OADA,EACA,IADA,GACA,QADA,CACA,IADA;AAEA;AACA;AAHA,qBAIA,OAJA;AAKA,sBALA,GAKA,EALA;AAMA;AACA,+BADA,GANA,SAMA,GANA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA,iBAJA;AAKA;AACA;AACA,iBAFA,EAhBA;;AAoBA,mBApBA,GAoBA,EApBA;AAqBA,wBArBA,GAqBA,EArBA;AAsBA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA,iBANA,EAtBA;AA6BA;AACA,4BADA,GA7BA,UA6BA,IA7BA;;AAgCA;AACA,yCAjCA;;AAmCA,KAvIA;AAwIA;AACA,yBAzIA,mCAyIA;AACA,mBADA,GACA,EADA;AAEA,sBAFA,GAEA,EAFA;AAGA;AACA;AACA,iBAFA,EAHA;AAMA;AACA,4BADA,GANA,SAMA,GANA;;AASA;AACA,4CAVA;AAWA,KApJA;AAqJA;AACA,UAtJA,kBAsJA,QAtJA,EAsJA,SAtJA,EAsJA;AACA,oCADA;;;AAIA,uBAJA,GAIA,QAJA,CAIA,OAJA,EAIA,IAJA,GAIA,QAJA,CAIA,IAJA,EAIA,OAJA,GAIA,QAJA,CAIA,OAJA;AAKA,mBALA,GAKA,EALA;AAMA;AACA;AACA;AACA;AACA,iBAJA;AAKA;AACA,wKADA;AAEA,iDAFA;AAGA,wCAHA,IAXA;;AAgBA,KAtKA,EAPA;;AA+KA,QA/KA,oBA+KA;AACA,oCADA;AAEA;AACA,4BADA;AAEA,6BAFA,IAFA;;AAMA,GArLA,E;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAAuxC,CAAgB,8sCAAG,EAAC,C;;;;;;;;;;;ACA3yC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f00adf4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"","var components = {\n  uCard: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-card/u-card\" */ \"uview-ui/components/u-card/u-card.vue\"\n    )\n  },\n  uCheckboxGroup: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-checkbox-group/u-checkbox-group\" */ \"uview-ui/components/u-checkbox-group/u-checkbox-group.vue\"\n    )\n  },\n  uCheckbox: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-checkbox/u-checkbox\" */ \"uview-ui/components/u-checkbox/u-checkbox.vue\"\n    )\n  },\n  uNumberBox: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n    )\n  },\n  uButton: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n    )\n  },\n  uEmpty: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-empty/u-empty\" */ \"uview-ui/components/u-empty/u-empty.vue\"\n    )\n  },\n  uToast: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-toast/u-toast\" */ \"uview-ui/components/u-toast/u-toast.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"wrap\">\n\t\t<u-card v-for=\"(cartItem, cartIndex) in cartList\" :title=\"cartItem.name\" :thumb-circle=\"true\" :title-size=\"36\" :full=\"true\" :thumb=\"cartItem.avatar\" :key=\"cartIndex\">\r\n\t\t\t<view class=\"card-head\" slot=\"head\">\r\n\t\t\t\t<u-checkbox-group shape=\"circle\" @change=\"batchCheckbox(cartItem)\">\r\n\t\t\t\t\t<u-checkbox v-model=\"cartItem.checked\"></u-checkbox>\r\n\t\t\t\t</u-checkbox-group>\r\n\t\t\t\t<image class=\"avatar\" :src=\"cartItem.avatar\" shape=\"circle\"></image>\r\n\t\t\t\t<span class=\"name\">{{cartItem.name}}</span>\r\n\t\t\t\t<span class=\"del-btn\" v-show=\"cartItem.total > 0\" @click=\"delCartGood(cartItem, cartIndex)\">删除</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-body\" slot=\"body\">\r\n\t\t\t\t<view class=\"u-body-item u-flex u-border-bottom u-col-between u-p-t-0\" v-for=\"(item, index) in cartItem.list\" :key=\"item.id\">\r\n\t\t\t\t\t<u-checkbox-group shape=\"circle\" @change=\"checkbox(cartItem, item)\">\r\n\t\t\t\t\t\t<u-checkbox v-model=\"item.checked\"></u-checkbox>\r\n\t\t\t\t\t</u-checkbox-group>\r\n\t\t\t\t\t<image :src=\"item.good_img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"u-body-item-title u-line-2\">\r\n\t\t\t\t\t\t<div class=\"item-title\">{{item.good_name}}</div>\r\n\t\t\t\t\t\t<div class=\"item-price-wrap\">\r\n\t\t\t\t\t\t\t<span class=\"item-price\">{{item.good_price}}元</span>\r\n\t\t\t\t\t\t\t<u-number-box style=\"margin-right: 20rpx;\" :min=\"1\" v-model=\"item.good_count\" @change=\"updateGoodCount(item)\"></u-number-box>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-foot\" slot=\"foot\">\r\n\t\t\t\t<span class=\"total\">合计：{{cartItem.total_price}}</span>\r\n\t\t\t\t<u-button type=\"error\" size=\"medium\" @click=\"submit(cartItem, cartIndex)\">结算({{cartItem.total}})</u-button>\r\n\t\t\t</view>\r\n\t\t</u-card>\r\n\t\t<u-card :title-size=\"36\" :full=\"true\" v-if=\"failureCartList.length > 0\">\r\n\t\t\t<view class=\"card-head\" slot=\"head\">\r\n\t\t\t\t<span class=\"name\">失效宝贝{{failureCartList.length}}件<span>(宝贝已不能购买)</span></span>\r\n\t\t\t\t<span class=\"del-btn\" @click=\"delAllFailureCartGood\">清空失效宝贝</span>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"card-body\" slot=\"body\">\r\n\t\t\t\t<view class=\"u-body-item u-flex u-border-bottom u-col-between u-p-t-0\" v-for=\"(item, index) in failureCartList\" :key=\"item.id\">\r\n\t\t\t\t\t<image :src=\"item.good_img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"u-body-item-title u-line-2\">\r\n\t\t\t\t\t\t<div class=\"item-title\">{{item.good_name}}</div>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-card>\r\n\t\t<u-empty class=\"empty\" text=\"暂无购物车数据\" mode=\"car\" v-if=\"cartList.length === 0 && failureCartList.length === 0\"></u-empty>\r\n\t\t<u-toast ref=\"uToast\" />\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tcartList: [],\r\n\t\t\t\tfailureCartList: []\n\t\t\t}\n\t\t},\n\t\tmethods: {\r\n\t\t\tshowToast(msg) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\ttitle: msg,\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\tasync getCartList(){\r\n\t\t\t\tconst {data} = await this.$requestTool.get('/cart/list', {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tuser_id: this.$store.state.userId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.resetCartList(data);\r\n\t\t\t},\r\n\t\t\tresetCartList(data){\r\n\t\t\t\tlet results = [];\r\n\t\t\t\tlet failureResults = []; // 失效的宝贝\r\n\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\tconst {admin_id, user_id, avatar, name, cart_id, id, good_id, good_count, good_price, good_name, good_img, statu} = item;\r\n\t\t\t\t\tconst goodItem = {\r\n\t\t\t\t\t\tid, // 商品订单详情 id\r\n\t\t\t\t\t\tcart_id,\r\n\t\t\t\t\t\tgood_id,\r\n\t\t\t\t\t\tgood_count,\r\n\t\t\t\t\t\tgood_price,\r\n\t\t\t\t\t\tgood_name,\r\n\t\t\t\t\t\tgood_img,\r\n\t\t\t\t\t\tstatu,\r\n\t\t\t\t\t\tfirstFlag: true,\r\n\t\t\t\t\t\tchecked: false\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(statu !== 0){ // s失效的宝贝，包含禁售和已删除商品\r\n\t\t\t\t\t\tfailureResults.push(item);\r\n\t\t\t\t\t}else if(results.every(result => result.admin_id !== item.admin_id)){ // 将当前订单信息分成几大类，根据管理员来分\r\n\t\t\t\t\t\tresults.push({\r\n\t\t\t\t\t\t\tadmin_id,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tuser_id,\r\n\t\t\t\t\t\t\tcart_id,\r\n\t\t\t\t\t\t\tchecked: false,\r\n\t\t\t\t\t\t\ttotal_price: 0,\r\n\t\t\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\t\t\tlist: [goodItem]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{ // 如果已有的管理员分类数据，则将商品信息添加到相应的 list 中\r\n\t\t\t\t\t\tfor(let result of results){\r\n\t\t\t\t\t\t\tif(result.admin_id === item.admin_id){\r\n\t\t\t\t\t\t\t\tresult.list.push(goodItem);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.failureCartList = failureResults;\r\n\t\t\t\tthis.cartList = results;\r\n\t\t\t},\n\t\t\t// 更新购物车商品数量\r\n\t\t\tasync updateGoodCount(item){\r\n\t\t\t\t// 刚进来的第一次不执行\r\n\t\t\t\tif(item.firstFlag){\r\n\t\t\t\t\titem.firstFlag = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await this.$requestTool.post('/cart/changeGoodCount', {\r\n\t\t\t\t\tgood_count: item.good_count,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t});\r\n\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t},\r\n\t\t\t// 复选框批量变化\r\n\t\t\tbatchCheckbox(cartItem){\r\n\t\t\t\tlet {checked, list} = cartItem;\r\n\t\t\t\tlist.forEach(item => {\r\n\t\t\t\t\titem.checked = checked;\r\n\t\t\t\t});\r\n\t\t\t\tif(checked){\r\n\t\t\t\t\tcartItem.total = list.reduce((prev, next) => prev + next.good_count, 0);\r\n\t\t\t\t\tcartItem.total_price = list.reduce((prev, next) => prev + next.good_count * next.good_price, 0);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcartItem.total = 0;\r\n\t\t\t\t\tcartItem.total_price = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 复选框单个变化\r\n\t\t\tcheckbox(cartItem, selItem){\r\n\t\t\t\tconst {list} = cartItem;\r\n\t\t\t\tconst {checked, good_count, good_price} = selItem;\r\n\t\t\t\tcartItem.checked = list.every(item => item.checked === true);\r\n\t\t\t\tif(checked){\r\n\t\t\t\t\tcartItem.total += good_count;\r\n\t\t\t\t\tcartItem.total_price += good_count * good_price;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcartItem.total -= good_count;\r\n\t\t\t\t\tcartItem.total_price -= good_count * good_price;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 删除购物车商品\r\n\t\t\tasync delCartGood(cartItem, cartIndex){\r\n\t\t\t\tconst {checked, cart_id, list} = cartItem;\r\n\t\t\t\t// 如果全部选中则删除购物车 cart 表中的数据以及 cart_detail 中关联的购物车商品详情数据\r\n\t\t\t\t// 未全部选中则只删除 cart_detail 中关联的购物车商品详情数据\r\n\t\t\t\tif(checked){\r\n\t\t\t\t\tlet indexs = [];\r\n\t\t\t\t\tconst res = await this.$requestTool.post('/cart/delAll', {\r\n\t\t\t\t\t\tid: cart_id\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\tthis.cartList.splice(cartIndex, 1);\r\n\t\t\t\t\tthis.failureCartList.forEach((item, index) => {\r\n\t\t\t\t\t\tif(item.cart_id === cart_id){\r\n\t\t\t\t\t\t\tindexs.push(index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tindexs.forEach(index => {\r\n\t\t\t\t\t\tthis.failureCartList.splice(index, 1);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet ids = [];\r\n\t\t\t\t\tlet tempList = [];\r\n\t\t\t\t\tlist.forEach((item, index) => {\r\n\t\t\t\t\t\tif(item.checked){\r\n\t\t\t\t\t\t\tids.push(item.id);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttempList.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst res = await this.$requestTool.post('/cart/delSomeGood', {\r\n\t\t\t\t\t\tids\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\tcartItem.list = tempList;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 清空所有失效宝贝\r\n\t\t\tasync delAllFailureCartGood(){\r\n\t\t\t\tlet ids = [];\r\n\t\t\t\tlet indexs = [];\r\n\t\t\t\tthis.failureCartList.forEach((item, index) => {\r\n\t\t\t\t\tids.push(item.id);\r\n\t\t\t\t});\r\n\t\t\t\tconst res = await this.$requestTool.post('/cart/delSomeGood', {\r\n\t\t\t\t\tids\r\n\t\t\t\t});\r\n\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\tthis.failureCartList = [];\r\n\t\t\t},\r\n\t\t\t// 结算\r\n\t\t\tasync submit(cartItem, cartIndex){\r\n\t\t\t\tif(cartItem.total === 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {cart_id, list, checked} = cartItem;\r\n\t\t\t\tlet ids = [];\r\n\t\t\t\tlist.forEach((item, index) => {\r\n\t\t\t\t\tif(item.checked){\r\n\t\t\t\t\t\tids.push(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:`/pages/order/detail2?cart_detail_ids=${ids.join(',')}&admin_id=${cartItem.admin_id}&cart_id=${checked ? cart_id : -1}`,\r\n\t\t\t\t\tanimationType:'slide-in-right',\r\n\t\t\t\t\tanimationDuration:500\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\tawait this.getCartList();\r\n\t\t\tuni.pageScrollTo({\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tduration: 300\r\n\t\t\t});\r\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\r\n\t.wrap {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #F1F1F1;\r\n\t}\r\n\t\n\t.u-card-wrap { \n\t\tbackground-color: $u-bg-color;\n\t\tpadding: 1px;\n\t}\n\t\n\t.u-body-item {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tpadding: 20rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t\t\r\n\t\timage {\r\n\t\t\twidth: 120rpx;\r\n\t\t\tflex: 0 0 120rpx;\r\n\t\t\theight: 120rpx;\r\n\t\t\tborder-radius: 8rpx;\r\n\t\t\tmargin-right: 12rpx;\r\n\t\t}\n\t}\r\n\t\r\n\t/deep/.u-card__head--left__title {\r\n\t\tposition: relative;\r\n\t\ttop: -5px;\r\n\t}\r\n\t\r\n\t.item-price-wrap {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t\r\n\t\t.item-price {\r\n\t\t\tcolor: $u-type-error;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.card-head {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t.avatar {\r\n\t\t\twidth: 60rpx;\r\n\t\t\theight: 60rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t}\r\n\t\t\r\n\t\t.name {\r\n\t\t\tmargin-left: 12rpx;\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\t\r\n\t\t\tspan {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: $u-type-error;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.del-btn {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: $u-type-error;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.card-foot {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\t\r\n\t\t.total {\r\n\t\t\tfont-size: 34rpx;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/deep/.u-empty {\r\n\t\theight: 100vh!important;\r\n\t}\n</style>\n","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1598332807399\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}